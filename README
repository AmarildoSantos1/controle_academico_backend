
ğŸ“˜ Sistema de Controle AcadÃªmico (Backend)
ğŸ“Œ DescriÃ§Ã£o Geral

Este projeto implementa um Sistema de Controle AcadÃªmico completo, destinado a uso por coordenaÃ§Ã£o, permitindo:

ğŸ“š Cadastro e gerenciamento de alunos

ğŸ”„ AtivaÃ§Ã£o e inativaÃ§Ã£o de alunos

ğŸ“ Registro de disciplinas por aluno

ğŸ§® LanÃ§amento de notas (E1, E2, E3)

â— CÃ¡lculo automÃ¡tico da mÃ©dia ponderada (30%, 30%, 40%)

ğŸ¯ Status automÃ¡tico do aluno (APROVADO, REPROVADO, EM_CURSO)

ğŸ“„ RelatÃ³rios CSV (por aluno e por turma)

ğŸ” AutenticaÃ§Ã£o baseada em token

ğŸ“‘ Logs de auditoria

ğŸ–¥ï¸ Interface de linha de comando (CLI)

ğŸ’¾ PersistÃªncia usando arquivos JSON

âš™ï¸ Tecnologias Utilizadas

Python 3.10+

FastAPI

Uvicorn

Pydantic

Requests

Pytest

JSON para persistÃªncia

CORS Middleware

ğŸ“ Estrutura do Projeto
backend/
â”‚â”€â”€ app.py               # API principal
â”‚â”€â”€ auth.py              # AutenticaÃ§Ã£o (hash, salt, tokens)
â”‚â”€â”€ models.py            # Modelos Pydantic
â”‚â”€â”€ storage.py           # PersistÃªncia em JSON
â”‚â”€â”€ util.py              # FunÃ§Ãµes auxiliares
â”‚â”€â”€ cli.py               # Interface de terminal
â”‚â”€â”€ requirements.txt     # DependÃªncias
â”‚
â””â”€â”€ data/                # PersistÃªncia local
    â”œâ”€â”€ admin.json
    â”œâ”€â”€ tokens.json
    â”œâ”€â”€ alunos.json
    â””â”€â”€ logs.json

ğŸš€ InstalaÃ§Ã£o e ExecuÃ§Ã£o
1ï¸âƒ£ Criar ambiente virtual
Windows
python -m venv .venv
.\.venv\Scripts\activate

Linux/Mac
python -m venv .venv
source .venv/bin/activate

2ï¸âƒ£ Instalar dependÃªncias
pip install -r requirements.txt

3ï¸âƒ£ Iniciar servidor
uvicorn app:app --reload --port 8000


Acesse:

API: http://127.0.0.1:8000

Swagger: http://127.0.0.1:8000/docs

ğŸ” AutenticaÃ§Ã£o (Token)

Todas as rotas, exceto login, exigem:

Authorization: Bearer SEU_TOKEN_AQUI

Login
POST /auth/login


Body:

{
  "username": "admin",
  "password": "1234"
}


Retorno:

{
  "token": "abcd1234..."
}


Senha Ã© armazenada com PBKDF2 + SALT.

ğŸ–¥ï¸ CLI (Interface via Terminal)

Execute em outro terminal:

python cli.py


Menu:

1) Login
2) Listar alunos
3) Criar aluno
4) Adicionar disciplina
5) LanÃ§ar nota

ğŸ§ª Testes Automatizados

Os testes utilizam Pytest.

Execute:

pytest


SaÃ­da esperada:

7 passed in 0.02s


Testes cobrem:

CÃ¡lculo de mÃ©dia

CÃ¡lculo de status

FunÃ§Ãµes utilitÃ¡rias

ValidaÃ§Ã£o de datas

ğŸ§© Roteiro Completo de Teste (Swagger/Postman)
âœ”ï¸ 1. Login

POST /auth/login

âœ”ï¸ 2. Criar aluno

POST /students

{
  "nome": "Maria Silva",
  "tipo_id": "MATRICULA",
  "identificador": "2025A0001",
  "data_cadastro": "2025-11-11",
  "ativo": true
}

âœ”ï¸ 3. Listar alunos

GET /students

âœ”ï¸ 4. Ativar/Inativar aluno

PATCH /students/{ID}/status

âœ”ï¸ 5. Adicionar disciplina

POST /students/{ID}/courses

âœ”ï¸ 6. LanÃ§ar notas

PATCH /students/{ID}/courses/{DISC_ID}/grade

1 requisiÃ§Ã£o por estÃ¡gio (E1, E2, E3).
ApÃ³s E3 â†’ mÃ©dia e status sÃ£o atualizados automaticamente.

âœ”ï¸ 7. Listar disciplinas

GET /students/{ID}/courses

Filtros:

?name=mat
?stage_with_grade=E1
?date_min=2025-01-01&date_max=2025-01-31

âœ”ï¸ 8. Gerar boletim (CSV)

GET /students/{ID}/report.csv

âœ”ï¸ 9. RelatÃ³rio geral da turma

GET /reports/class.csv

âœ”ï¸ 10. Consultar logs
GET /logs
GET /logs?aid=ALUNO_ID

ğŸ“Œ Regras de NegÃ³cio
MÃ©dia Final
MÃ‰DIA = E1Ã—0.30 + E2Ã—0.30 + E3Ã—0.40

Status do aluno

MÃ©dia â‰¥ 7.0 â†’ APROVADO

MÃ©dia < 7.0 â†’ REPROVADO

Falta alguma nota â†’ EM_CURSO

PersistÃªncia

Todos os dados sÃ£o salvos automaticamente em /data.

ğŸ› ï¸ Problemas Comuns e SoluÃ§Ãµes
â— ModuleNotFoundError: No module named 'storage' ao rodar pytest

Corrigido adicionando no inÃ­cio dos testes:

import os, sys
sys.path.insert(0, os.path.dirname(os.path.dirname(__file__)))

â— VS Code: Import "pytest" could not be resolved

SoluÃ§Ã£o:

Ativar o venv

Instalar:

pip install pytest


Selecionar o interpretador correto no VS Code (Ctrl+Shift+P)

â— VS Code: Import "requests" could not be resolved

SoluÃ§Ã£o:

pip install requests

ğŸ¯ ConclusÃ£o

Este backend implementa:

API completa

AutenticaÃ§Ã£o segura

PersistÃªncia em JSON

CLI para uso rÃ¡pido

RelatÃ³rios CSV

Logs de auditoria

Testes automatizados

