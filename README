ğŸ“˜ Sistema de Controle AcadÃªmico â€“ Backend Completo (FastAPI + CLI + Criptografia)
ğŸ“Œ DescriÃ§Ã£o Geral

Este projeto implementa um Sistema de Controle AcadÃªmico completo, que permite:

Gerenciar alunos

Criar, atualizar e remover disciplinas

LanÃ§ar notas (E1, E2, E3)

Gerar mÃ©dias ponderadas (30/30/40)

Determinar status automÃ¡tico (APROVADO, REPROVADO, EM_CURSO)

Visualizar disciplinas do aluno via CLI (com status e mÃ©dia)

Registrar logs de auditoria com criptografia

Exportar relatÃ³rios CSV (aluno e turma)

AutenticaÃ§Ã£o via Token

PersistÃªncia em JSON

Testes unitÃ¡rios e integrados

Interface completa via terminal (CLI)

âš ï¸ Problemas com o ambiente .venv? (Windows)

Se ocorrerem erros como:

â€œpytest nÃ£o encontradoâ€

â€œImport not foundâ€

â€œrequests nÃ£o encontradoâ€

â€œscripts estÃ£o desabilitadosâ€

Recrie o ambiente virtual:

1ï¸âƒ£ Remover .venv:

Remove-Item -Recurse -Force .venv


2ï¸âƒ£ Liberar execuÃ§Ã£o de scripts:

Set-ExecutionPolicy RemoteSigned -Scope Process


3ï¸âƒ£ Criar novamente:

python -m venv .venv
.\.venv\Scripts\activate


4ï¸âƒ£ Instalar dependÃªncias:

pip install -r requirements.txt

ğŸ› ï¸ Tecnologias Utilizadas

Python 3.10+

FastAPI

Uvicorn

Pydantic

Requests

Cryptography (Fernet / AES)

Pytest

JSON para persistÃªncia

ğŸ“‚ Estrutura do Projeto
backend/
â”‚â”€â”€ app.py
â”‚â”€â”€ auth.py
â”‚â”€â”€ storage.py
â”‚â”€â”€ util.py
â”‚â”€â”€ models.py
â”‚â”€â”€ cli.py
â”‚â”€â”€ run_tests.py
â”‚â”€â”€ requirements.txt
â”‚
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ test_domain.py
â”‚   â”œâ”€â”€ test_crypto.py
â”‚   â””â”€â”€ test_api_integration.py
â”‚
â””â”€â”€ data/
    â”œâ”€â”€ alunos.json
    â”œâ”€â”€ logs.json
    â”œâ”€â”€ admin.json
    â”œâ”€â”€ tokens.json
    â””â”€â”€ fernet.key

ğŸš€ InstalaÃ§Ã£o e ExecuÃ§Ã£o
1ï¸âƒ£ Criar ambiente virtual
Windows
python -m venv .venv
.\.venv\Scripts\activate

Linux/Mac
python -m venv .venv
source .venv/bin/activate

2ï¸âƒ£ Instalar dependÃªncias
pip install -r requirements.txt

3ï¸âƒ£ Iniciar o servidor
uvicorn app:app --reload --port 8000


Acesse:

API Root â†’ http://127.0.0.1:8000

Swagger â†’ http://127.0.0.1:8000/docs

ğŸ” AutenticaÃ§Ã£o

Todas as rotas (exceto /auth/login) exigem:

Authorization: Bearer SEU_TOKEN

Login:
POST /auth/login
{
  "username": "admin",
  "password": "1234"
}

ğŸ–¥ï¸ CLI â€” Interface via Terminal

Execute:

python cli.py


Menu:

1) Login
2) Listar alunos
3) Criar aluno
4) Adicionar disciplina a aluno
5) LanÃ§ar nota em disciplina
6) Listar disciplinas de um aluno
7) Atualizar disciplina
8) Remover disciplina
9) Ver logs de auditoria
0) Sair

ğŸ§­ Passo a passo COMPLETO (COM EXEMPLOS REAIS)
â­ 1) Login
UsuÃ¡rio [admin]:
Senha [1234]:
âœ… Login realizado com sucesso.

â­ 2) Criar aluno â€” EXEMPLO REAL
=== NOVO ALUNO ===
Nome: Afonso
Tipo do identificador (MATRICULA/CPF): MATRICULA
Identificador: 2025A0005
Data de cadastro: 2025-11-30
Ativo? S


Resultado:

âœ… Aluno criado com sucesso!
ID: d627... | Nome: Afonso

â­ 3) Listar alunos
ID: d627... | Nome: Afonso | Ativo: True
Tipo/ID: MATRICULA 2025A0005
Disciplinas: 0

â­ 4) Adicionar disciplina
ID do aluno: d627...
Nome da disciplina: SeguranÃ§a da InformaÃ§Ã£o
Data: 2025-11-30

â­ 5) LanÃ§ar notas
EstÃ¡gio: E1
Nota: 8


ApÃ³s E1, E2 e E3:

MÃ©dia: 8.2
Status: APROVADO

â­ 6) Listar disciplinas (VERSÃƒO MELHORADA)
Aluno: Afonso

1) SeguranÃ§a da InformaÃ§Ã£o
    Status: APROVADO
    MÃ©dia: 8.2
    ID: 8b3f...


Selecionando:

Notas: {'E1': 8, 'E2': 7, 'E3': 9}
MÃ©dia: 8.2
Status: APROVADO

ğŸ“„ RelatÃ³rios CSV
Boletim do aluno:
GET /students/{id}/report.csv

RelatÃ³rio geral:
GET /reports/class.csv


Incluem:

disciplinas

notas

mÃ©dia

status

ğŸ“œ Logs de Auditoria

Cifrados com Cifra de CÃ©sar

Decifrados ao exibir no CLI e API

Exemplo:

[2025-11-30] ALUNO_CRIADO
Mensagem: Aluno criado - aluno=d627...

ğŸ” Criptografia â€” ImplementaÃ§Ã£o Completa

O sistema utiliza trÃªs mÃ©todos criptogrÃ¡ficos, cada um de uma categoria diferente:

1ï¸âƒ£ PBKDF2-HMAC-SHA256 â€” Hash seguro da senha do admin

Arquivo: auth.py

Trecho real:

dk = hashlib.pbkdf2_hmac('sha256', password.encode(), salt, 100_000)


Usado em:

ensure_admin()

_hash_password()

_verify_password()

2ï¸âƒ£ Fernet (AES + HMAC) â€” Criptografia moderna

Arquivos: util.py, storage.py
Protege: Identificador do aluno (CPF / MatrÃ­cula)

Trecho real:

encrypt_sensitive(a.identificador)


Exemplo no JSON:

"identificador_enc": "gAAAAA..."

3ï¸âƒ£ Cifra de CÃ©sar â€” Criptografia clÃ¡ssica

Arquivos: util.py, storage.py
Protege: mensagens de log

Trecho:

mensagem_cifrada = caesar_encrypt(..., shift=3)

ğŸ§ª Testes Automatizados

Execute:

python run_tests.py


Ele:

executa todos os testes

valida criptografia

testa fluxo completo

gera relatÃ³rio amigÃ¡vel

NÃƒO altera a base real de alunos

ğŸ§© Regras de NegÃ³cio
MÃ©dia:
E1 Ã— 0.30 + E2 Ã— 0.30 + E3 Ã— 0.40

Status:

APROVADO â†’ mÃ©dia â‰¥ 7

REPROVADO â†’ mÃ©dia < 7

EM_CURSO â†’ notas faltando

ğŸ¯ ConclusÃ£o

Este backend estÃ¡ completo e pronto para apresentaÃ§Ã£o, contendo:

API robusta

CLI funcional e intuitivo

TrÃªs mÃ©todos criptogrÃ¡ficos

Logs protegidos

RelatÃ³rios CSV

Testes completos

PersistÃªncia em JSON
