# ğŸ“˜ Sistema de Controle AcadÃªmico (Backend)

## ğŸ“Œ DescriÃ§Ã£o Geral

Este projeto implementa um **Sistema de Controle AcadÃªmico** para uso por coordenadores, permitindo:

- Cadastro e gerenciamento de alunos  
- AtivaÃ§Ã£o/inativaÃ§Ã£o de alunos  
- Cadastro de disciplinas por aluno  
- LanÃ§amento de notas por estÃ¡gio (E1, E2, E3)  
- CÃ¡lculo automÃ¡tico da mÃ©dia ponderada (30/30/40)  
- DefiniÃ§Ã£o automÃ¡tica do status (APROVADO, REPROVADO, EM_CURSO)  
- GeraÃ§Ã£o de relatÃ³rios CSV (aluno e turma)  
- Sistema de autenticaÃ§Ã£o por token  
- Logs de auditoria de todas as aÃ§Ãµes  

Todo o sistema roda exclusivamente no **backend**, utilizando arquivos JSON como persistÃªncia.

---

# âš™ï¸ Tecnologias Utilizadas

- **Python 3.10+**
- **FastAPI**
- **Uvicorn**
- **Pydantic**
- **CORS Middleware**
- **JSON como banco de dados**
- **AutenticaÃ§Ã£o Token-based**

---

# ğŸ“ Estrutura do Projeto

backend/
â”‚â”€â”€ app.py
â”‚â”€â”€ auth.py
â”‚â”€â”€ models.py
â”‚â”€â”€ storage.py
â”‚â”€â”€ util.py
â”‚â”€â”€ requirements.txt
â”‚
â””â”€â”€ data/
â”œâ”€â”€ admin.json
â”œâ”€â”€ tokens.json
â”œâ”€â”€ alunos.json
â””â”€â”€ logs.json


---

# ğŸš€ InstalaÃ§Ã£o e ExecuÃ§Ã£o

## 1ï¸âƒ£ Criar ambiente virtual

### Windows
```bash
python -m venv .venv
.\.venv\Scripts\activate
```

### Linux/Mac
```bash
python -m venv .venv
source .venv/bin/activate
```
## 2ï¸âƒ£ Instalar dependÃªncias
```bash
pip install -r requirements.txt
```

## 3ï¸âƒ£ Iniciar servidor
```bash
uvicorn app:app --reload --port 8000
```
## 4ï¸âƒ£ Acessar documentaÃ§Ã£o interativa
```bash
ğŸ‘‰ http://127.0.0.1:8000/docs
```

## ğŸ” AutenticaÃ§Ã£o

Todas as rotas (exceto login) exigem o header:

```bash 
Authorization: Bearer SEU_TOKEN_AQUI
```
### No postman - Login (obter token)
```bash
POST /auth/login

Body:
{
  "username": "admin",
  "password": "1234"
}

Retorno:
{
  "token": "abcd1234..."
}
```
### ğŸ§ª Roteiro Completo de Testes (Postman / Swagger)
### âœ”ï¸ 1. Login

POST /auth/login

Copia o token â†’ usar nas prÃ³ximas requisiÃ§Ãµes.

### âœ”ï¸ 2. Criar aluno
```bash
POST /students

{
  "nome": "Maria Silva",
  "tipo_id": "MATRICULA",
  "identificador": "2025A0001",
  "data_cadastro": "2025-11-11",
  "ativo": true
}


O retorno fornecerÃ¡:

"id": "ALUNO_ID"
```

### âœ”ï¸ 3. Listar alunos

GET /students

### âœ”ï¸ 4. Ativar ou desativar aluno
```bash
PATCH /students/{ALUNO_ID}/status

Desativar:
{
  "ativo": false
}

Ativar:
{
  "ativo": true
}
```
### âœ”ï¸ 5. Adicionar disciplina ao aluno
```bash
POST /students/{ALUNO_ID}/courses

{
  "nome": "MatemÃ¡tica I",
  "data_cadastro": "2025-11-11"
}


Retorno contÃ©m:

"id": "DISC_ID"
```

### âœ”ï¸ 6. LanÃ§ar notas (UMA nota por requisiÃ§Ã£o)
```bash
PATCH /students/{ALUNO_ID}/courses/{DISC_ID}/grade

E1:
{
  "estagio": "E1",
  "nota": 8
}

E2:
{
  "estagio": "E2",
  "nota": 7
}

E3:
{
  "estagio": "E3",
  "nota": 9
}


ApÃ³s E3:

mÃ©dia Ã© calculada

status Ã© atualizado (APROVADO/REPROVADO)
```

### âœ”ï¸ 7. Listar disciplinas do aluno
```bash
GET /students/{ALUNO_ID}/courses

Filtros disponÃ­veis:

Nome: ?name=mat

SÃ³ disciplinas com nota em um estÃ¡gio: ?stage_with_grade=E1

Datas:

?date_min=2025-11-01&date_max=2025-11-30
```

### âœ”ï¸ 8. Gerar boletim do aluno (CSV)
```bash
GET /students/{ALUNO_ID}/report.csv

Inclui:

nome

matrÃ­cula/cpf

status ativo

todas as disciplinas, notas e mÃ©dia
```

### âœ”ï¸ 9. Gerar relatÃ³rio da turma (CSV)
```bash
GET /reports/class.csv

Lista todos os alunos e disciplinas.
```
### âœ”ï¸ 10. Consultar logs de auditoria
Todos os logs:

GET /logs

Logs de um aluno especÃ­fico:

GET /logs?aid=ALUNO_ID

### Exemplos de aÃ§Ãµes registradas:

ALUNO_CRIADO

DISCIPLINA_CRIADA

NOTA_ATUALIZADA

ALUNO_STATUS_ALTERADO

ALUNO_REMOVIDO

### ğŸ“Œ Regras de NegÃ³cio

MÃ©dia final = E1Ã—0.30 + E2Ã—0.30 + E3Ã—0.40

MÃ©dia â‰¥ 7 â†’ APROVADO

MÃ©dia < 7 â†’ REPROVADO

Se falta qualquer nota â†’ EM_CURSO

As notas sÃ£o lanÃ§adas individualmente

Todos os dados persistem em JSON no diretÃ³rio /data
